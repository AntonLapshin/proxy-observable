!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(n.proxyObservable=n.proxyObservable||{})}(this,function(n){"use strict";var e=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},t=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),o=function(){function n(){e(this,n),this.callbacks={},this.values={}}return t(n,[{key:"has",value:function(n){return n in this.callbacks&&this.callbacks[n].length>0}},{key:"on",value:function(n,e){return n in this.callbacks==!1&&(this.callbacks[n]=[]),this.callbacks[n].push(e),this}},{key:"change",value:function(n,e){var t=this.values[n];return this.values[n]=e,n in this.callbacks&&this.callbacks[n].forEach(function(n){return n(e,t)}),this}},{key:"off",value:function(n){for(var e in this.callbacks)for(var t=this.callbacks[e],o=0;o<t.length;o++)if(t[o]===n)return t.splice(o,1),!0;return!1}},{key:"once",value:function(n,e){var t=this;this.on(n,function o(r){var i=t.values[n];e(r,i),t.off(o)})}}]),n}();n.proxy=function(n){var e=void 0,t=void 0;return n.proxy?(e=n.proxy(),t=n.observable()):(t=new o,e=new Proxy(n,{get:function(n,e){return e in n?n[e]:"on"===e?function(e,o){e in n&&t.change(e,n[e]),t.on(e,o)}:"off"===e?function(n){t.off(n)}:void 0},set:function(e,o,r){return t.has(o)?t.change(o,r):o in e?e[o]=r:(t.on(o,function(e){n[o]=e}),t.change(o,r)),!0}}),n.proxy=function(){return e},n.observable=function(){return t}),n},Object.defineProperty(n,"__esModule",{value:!0})});

!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.observable=t()}(this,function(){"use strict";var n=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function n(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),e=function(){function e(t){n(this,e),this.fns={},this.o=t,this.any=[]}return t(e,[{key:"has",value:function(n){return n in this.fns&&this.fns[n].length>0||this.any.length>0}},{key:"on",value:function(n,t){return"any"===n?(this.any.push(t),this):(n in this.fns==!1&&(this.fns[n]=[]),this.fns[n].push(t),this)}},{key:"fire",value:function(n,t){var e=this.o[n];return this.any.forEach(function(i){return i(n,t,e)}),n in this.fns&&this.fns[n].forEach(function(n){return n(t,e)}),this}},{key:"off",value:function(n){for(var t in this.fns)for(var e=this.fns[t],i=0;i<e.length;i++)if(e[i]===n)return e.splice(i,1),!0;for(var r=0;r<this.any.length;r++)if(this.any[r]===n)return this.any.splice(r,1),!0;return!1}},{key:"once",value:function(n,t){var e=this;this.on(n,function i(r){var f=e.o[n];t(r,f),e.off(i)})}}]),e}();return function(n){if(n.on&&n.off)return n;var t=new e(n);return new Proxy(n,{get:function(n,e){return e in n?(n.constructor===Array&&"pop"===e&&t.fire("pop",n[n.length-1]),n[e]):"on"===e?function(e,i){e in n&&t.fire(e,n[e]),t.on(e,i)}:"off"===e?function(n){t.off(n)}:void 0},set:function(n,e,i){return n.constructor===Array&&"length"!==e?t.fire("change",i):t.has(e)&&t.fire(e,i),n[e]=i,!0}})}});

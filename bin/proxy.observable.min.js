!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.observable=t()}(this,function(){"use strict";var n=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),e=function(){function e(t){n(this,e),this.callbacks={},this.target=t}return t(e,[{key:"has",value:function(n){return n in this.callbacks&&this.callbacks[n].length>0}},{key:"on",value:function(n,t){return n in this.callbacks==!1&&(this.callbacks[n]=[]),this.callbacks[n].push(t),this}},{key:"fire",value:function(n,t){var e=this.target[n];return n in this.callbacks&&this.callbacks[n].forEach(function(n){return n(t,e)}),this}},{key:"off",value:function(n){for(var t in this.callbacks)for(var e=this.callbacks[t],r=0;r<e.length;r++)if(e[r]===n)return e.splice(r,1),!0;return!1}},{key:"once",value:function(n,t){var e=this;this.on(n,function r(i){var o=e.target[n];t(i,o),e.off(r)})}}]),e}();return function(n){if(n.on&&n.off)return n;var t=new e(n);return new Proxy(n,{get:function(n,e){return e in n?(n.constructor===Array&&"pop"===e&&t.fire("pop",n[n.length-1]),n[e]):"on"===e?function(e,r){e in n&&t.fire(e,n[e]),t.on(e,r)}:"off"===e?function(n){t.off(n)}:void 0},set:function(n,e,r){return t.has(e)?t.fire(e,r):n.constructor===Array&&"length"!==e&&t.fire("change",r),n[e]=r,!0}})}});

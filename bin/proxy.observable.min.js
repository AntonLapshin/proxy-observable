!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.observable=e()}(this,function(){"use strict";var n=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")};function r(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var e=(function(n,e,t){return e&&r(n.prototype,e),t&&r(n,t),n}(t,[{key:"has",value:function(n){return n in this.fns&&0<this.fns[n].length||0<this.fns.any.length}},{key:"on",value:function(n,e){return n in this.fns==!1&&(this.fns[n]=[]),this.fns[n].push(e),e}},{key:"fire",value:function(e,t,r){return this.fns.any.concat(e in this.fns?this.fns[e]:[]).forEach(function(n){return n(t,r,e)}),this}},{key:"off",value:function(n){for(var e in this.fns)for(var t=this.fns[e],r=0;r<t.length;r++)if(t[r]===n)return t.splice(r,1),!0;return!1}},{key:"once",value:function(n,r){function i(n,e,t){r(n,e,t),f.off(i)}var f=this;return this.on(n,i),i}}]),t);function t(){n(this,t),this.fns={any:[]}}return function(n){if(n.on&&n.off)return n;var r=new e,i=new Proxy(n,{get:function(n,e){var t;return e in n?(n.constructor===Array&&(t=i,"pop"===e?t=n[n.length-1]:"shift"===e&&(t=n[0]),"push"!==e&&"length"!==e&&r.fire(e,t)),n[e]):"on"===e?r.on.bind(r):"once"===e?r.once.bind(r):"off"===e?r.off.bind(r):void 0},set:function(n,e,t){return n.constructor===Array?"length"!==e&&r.fire("change",t):r.has(e)&&r.fire(e,t,n[e]),n[e]=t,!0}});return i}});

!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(n.ProxyObservable=n.ProxyObservable||{})}(this,function(n){"use strict";var e=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},t=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),i=function(){function n(){e(this,n),this.callbacks={},this.values={}}return t(n,[{key:"has",value:function(n){return n in this.callbacks&&this.callbacks[n].length>0}},{key:"on",value:function(n,e){return n in this.callbacks==!1&&(this.callbacks[n]=[]),this.callbacks[n].push(e),this}},{key:"change",value:function(n,e){var t=this.values[n];return this.values[n]=e,n in this.callbacks&&this.callbacks[n].forEach(function(n){return n(e,t)}),this}},{key:"off",value:function(n){for(var e in this.callbacks)for(var t=this.callbacks[e],i=0;i<t.length;i++)if(t[i]===n)return t.splice(i,1),!0;return!1}},{key:"once",value:function(n,e){var t=this;this.on(n,function i(r){var a=t.values[n];e(r,a),t.off(i)})}}]),n}();n.proxy=function(n){if(n.on&&n.off)return n;var e=new i,t=new Proxy(n,{get:function(n,t){return t in n?n[t]:"on"===t?function(t,i){t in n&&e.change(t,n[t]),e.on(t,i)}:"off"===t?function(n){e.off(n)}:void 0},set:function(n,t,i){return e.has(t)?e.change(t,i):n[t]=i,!0}});return t},Object.defineProperty(n,"__esModule",{value:!0})});
